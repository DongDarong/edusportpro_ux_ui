<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Division | EduSportPro</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <script src="/admin/admin-data-store.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            hope: {
              lime: '#8DC63F',
              cyan: '#00AEEF',
              red: '#ED1C24',
              yellow: '#FDC116',
              dark: '#1D1D1B',
              light: '#f2f4f7',
            }
          }
        }
      }
    }
  </script>

  <style>
    body {
      background:
        radial-gradient(circle at 5% 0%, rgba(0, 174, 239, 0.10), transparent 30%),
        radial-gradient(circle at 100% 0%, rgba(141, 198, 63, 0.10), transparent 36%),
        #f2f4f7;
      color: #1D1D1B;
      overflow-x: hidden;
    }

    main {
      scroll-behavior: smooth;
    }

    .quick-nav {
      box-shadow: 0 10px 22px rgba(12, 30, 44, 0.08);
    }

    .quick-nav-link {
      transition: all 0.2s ease;
    }

    .quick-nav-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0, 174, 239, 0.12);
    }

    .section-card {
      position: relative;
      border-color: #e6edf2 !important;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.05);
    }

    .section-card::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: 12px 0 0 12px;
      background: linear-gradient(180deg, #00AEEF, #8DC63F);
    }

    .section-table thead tr {
      background: linear-gradient(90deg, #f8fafc, #eef6fb);
    }

    .section-table tbody tr:hover {
      background-color: #f9fcff;
    }

    .glass-backdrop {
      background-color: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
    }
  </style>
</head>

<body class="antialiased h-screen flex flex-col">
  <nav class="bg-white w-full shadow-sm border-b border-gray-200 flex items-center justify-between px-4 md:px-6 py-3 sticky top-0 z-50 shrink-0">
    <div class="flex items-center gap-3">
      <button onclick="toggleSidebar()" class="md:hidden p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-hope-lime">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
      </button>
      <div class="w-15 h-12 md:w-25 md:h-15 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-100 shadow-sm shrink-0">
        <img src="/images/logo.jpg" alt="Logo" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\'text-[10px] font-bold text-gray-400\'>HOPE</span>'">
      </div>
      <div class="hidden sm:block">
        <div class="text-[10px] md:text-xs font-bold text-hope-dark uppercase tracking-tight leading-tight">Organization for Children's</div>
        <div class="text-xs md:text-sm font-extrabold text-hope-cyan leading-none">Hope Foundation of Cambodia</div>
      </div>
    </div>

    <div class="flex items-center gap-3 md:gap-6">
      <a href="/admin/admin-notifications.html" class="relative p-2 hover:bg-gray-100 rounded-full transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-hope-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
        </svg>
        <span class="absolute top-1 right-1 bg-hope-red text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-white">4</span>
      </a>
      <a href="/admin/admin-profile.html" class="flex items-center gap-2 md:gap-3 cursor-pointer pl-2 md:pl-4 border-l border-gray-200 hover:bg-gray-50 transition-colors rounded-r-lg p-1">
        <div class="text-right hidden md:block">
          <div class="text-sm font-semibold text-hope-dark">Admin User</div>
          <div class="text-xs text-gray-500">Super Admin</div>
        </div>
        <div class="w-8 h-8 md:w-9 md:h-9 bg-hope-cyan rounded-full flex items-center justify-center text-white font-bold border-2 border-white shadow-sm shrink-0">AU</div>
      </a>
    </div>
  </nav>

  <div class="flex h-[calc(100vh-64px)] relative overflow-hidden">
    <div id="sidebarBackdrop" onclick="toggleSidebar()" class="fixed inset-0 glass-backdrop z-[55] hidden transition-opacity opacity-0 md:hidden"></div>

    <aside id="sidebar" class="w-64 bg-white shadow-xl md:shadow-md flex-shrink-0 z-[60] fixed inset-y-0 left-0 transform -translate-x-full transition-transform duration-300 md:translate-x-0 md:static md:z-auto h-full">
      <div class="p-5 h-full overflow-y-auto relative flex flex-col">
        <button onclick="toggleSidebar()" class="absolute top-4 right-4 md:hidden text-gray-400 hover:text-hope-red transition-colors p-1">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>

        <div class="mb-8 px-2">
          <div class="text-2xl font-extrabold tracking-tighter">
            <span class="text-hope-lime">Edu</span><span class="text-hope-cyan">Sport</span><span class="text-hope-red">Pro</span>
          </div>
        </div>

        <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 px-2">Main Menu</h2>
        <nav class="space-y-1 flex-1">
          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-dashboard.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
            Dashboard
          </a>
          
          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-users.html">
            <svg class="w-5 h-5 group-hover:text-hope-lime transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            Users
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-teams.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
            Teams
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-players.html">
             <svg class="w-5 h-5 group-hover:text-hope-red transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
            Players
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-matches.html">
            <svg class="w-5 h-5 group-hover:text-hope-yellow transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            Matches
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-tournament-overview.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 21h8M12 17v4M7 4h10l-1 6H8L7 4zM5 4h14"></path></svg>
            Tournament
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg bg-hope-yellow/10 text-hope-yellow font-semibold" href="/admin/admin-division.html">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h18M3 12h18M3 17h18"></path></svg>
            Division
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-training.html">
             <svg class="w-5 h-5 group-hover:text-hope-red transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
            Training
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-att.html">
             <svg class="w-5 h-5 group-hover:text-hope-lime transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>
            Attendance
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-calendar.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            Calendar
          </a>

          <div class="pt-4 pb-2">
            <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider px-2">Management</h2>
          </div>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-performance.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
            Performance
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-inventory.html">
            <svg class="w-5 h-5 group-hover:text-hope-lime transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
            Inventory
          </a>

          <a class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-hope-dark transition-colors group" href="/admin/admin-reports.html">
            <svg class="w-5 h-5 group-hover:text-hope-cyan transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
            Reports
          </a>
        </nav>

        <div class="mt-auto pt-6 border-t border-gray-100">
          <a href="/index.html" class="flex items-center gap-3 py-2.5 px-4 rounded-lg text-hope-red hover:bg-red-50 transition-colors font-semibold">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7"></path></svg>
            Sign Out
          </a>
        </div>
      </div>
    </aside>

    <main class="flex-1 p-4 md:p-8 overflow-y-auto w-full">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-4">
        <div>
          <h1 class="text-2xl md:text-3xl font-bold text-hope-dark">Division Page (Admin)</h1>
          <p class="text-gray-500 mt-1 text-sm md:text-base">Manage groups, match schedule, and standings by division.</p>
        </div>
        <div class="w-full md:w-auto">
          <div class="flex gap-2">
            <a href="/admin/admin-random-groups.html" class="w-full md:w-auto inline-flex items-center justify-center px-4 py-2.5 rounded-lg bg-hope-lime hover:bg-lime-500 text-white font-semibold shadow-sm transition-colors">Random Groups</a>
            <a href="/admin/admin-knockout-bracket.html" class="w-full md:w-auto inline-flex items-center justify-center px-4 py-2.5 rounded-lg bg-hope-yellow hover:bg-amber-400 text-hope-dark font-semibold shadow-sm transition-colors">Knockout Bracket</a>
          </div>
        </div>
      </div>

      <div class="quick-nav sticky top-16 z-30 bg-hope-light/95 backdrop-blur-sm border border-gray-200 rounded-xl p-3 mb-6">
        <p class="text-[11px] font-semibold uppercase tracking-wider text-gray-500 mb-2">Quick Navigation</p>
        <div class="flex flex-col sm:flex-row gap-2">
          <select id="quickNavSelect" class="w-full sm:flex-1 bg-white border border-gray-200 text-hope-dark text-sm rounded-lg px-3 py-2 outline-none focus:ring-hope-cyan focus:border-hope-cyan">
            <option value="#matches">Matches</option>
            <option value="#standings">Standings</option>
            <option value="#group-standings">Group Standings</option>
            <option value="#match-list">Match List</option>
            <option value="#live-center">Live Center</option>
            <option value="#player-profile">Player</option>
            <option value="#leaderboard">Leaderboard</option>
          </select>
          <button id="quickNavGoBtn" class="w-full sm:w-auto quick-nav-link px-4 py-2 rounded-lg bg-white border border-gray-200 text-sm font-semibold hover:border-hope-cyan hover:text-hope-cyan">
            Go
          </button>
        </div>
      </div>

      <div id="matches" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark mb-4">2. Matches</h2>
        <div class="overflow-x-auto">
          <table class="section-table min-w-full text-sm">
            <thead>
              <tr class="bg-gray-50 border-b border-gray-200">
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Match</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Group</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Date</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Venue</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Status</th>
              </tr>
            </thead>
            <tbody id="divisionMatchesBody" class="divide-y divide-gray-100"></tbody>
          </table>
        </div>
      </div>

      <div id="standings" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark mb-4">3. Standings</h2>
        <div class="overflow-x-auto">
          <table class="section-table min-w-full text-sm">
            <thead>
              <tr class="bg-gray-50 border-b border-gray-200">
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Pos</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">Team</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">P</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">W</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">D</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">L</th>
                <th class="px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider">Pts</th>
              </tr>
            </thead>
            <tbody id="divisionStandingsBody" class="divide-y divide-gray-100"></tbody>
          </table>
        </div>
      </div>

      <div id="group-standings" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark">5. Group Standings</h2>
        <p class="text-sm text-gray-500 mt-1 mb-4">·ûè·ûö·ûÑ·ûñ·ûì·ûë·ûñ·ûõ A/B/C</p>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <div class="border border-gray-100 rounded-lg overflow-hidden">
            <div class="bg-hope-cyan/10 text-hope-cyan font-semibold px-4 py-2">Group A</div>
            <table class="section-table min-w-full text-sm">
              <thead><tr class="bg-gray-50"><th class="px-4 py-2 text-left">Team</th><th class="px-4 py-2 text-right">Pts</th></tr></thead>
              <tbody id="divisionGroupABody" class="divide-y divide-gray-100"></tbody>
            </table>
          </div>
          <div class="border border-gray-100 rounded-lg overflow-hidden">
            <div class="bg-hope-lime/10 text-hope-lime font-semibold px-4 py-2">Group B</div>
            <table class="section-table min-w-full text-sm">
              <thead><tr class="bg-gray-50"><th class="px-4 py-2 text-left">Team</th><th class="px-4 py-2 text-right">Pts</th></tr></thead>
              <tbody id="divisionGroupBBody" class="divide-y divide-gray-100"></tbody>
            </table>
          </div>
          <div class="border border-gray-100 rounded-lg overflow-hidden">
            <div class="bg-hope-red/10 text-hope-red font-semibold px-4 py-2">Group C</div>
            <table class="section-table min-w-full text-sm">
              <thead><tr class="bg-gray-50"><th class="px-4 py-2 text-left">Team</th><th class="px-4 py-2 text-right">Pts</th></tr></thead>
              <tbody id="divisionGroupCBody" class="divide-y divide-gray-100"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="match-list" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark">6. Match List</h2>
        <p class="text-sm text-gray-500 mt-1 mb-4">·ûÄ·ûõ·ûú·ûó·ûÇ·ûî·ûö·ûÄ·ûè·ûë·ûÑ·û¢·ûü</p>
        <div class="overflow-x-auto">
          <table class="section-table min-w-full text-sm">
            <thead>
              <tr class="bg-gray-50 border-b border-gray-200">
                <th class="px-4 py-3 text-left">Match</th>
                <th class="px-4 py-3 text-left">Date</th>
                <th class="px-4 py-3 text-left">Venue</th>
                <th class="px-4 py-3 text-left">Status</th>
              </tr>
            </thead>
            <tbody id="divisionMatchListBody" class="divide-y divide-gray-100"></tbody>
          </table>
        </div>
      </div>

      <div id="live-center" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark mb-4">7. Match Detail (Live Center) üî¥</h2>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <div class="lg:col-span-1 rounded-lg border border-gray-100 bg-gray-50 p-4">
            <p class="text-xs uppercase text-gray-500">Score</p>
            <p class="text-3xl font-extrabold text-hope-dark mt-2">2 - 1</p>
            <p class="text-sm text-gray-500 mt-1">Team A vs Team B | 72'</p>
          </div>
          <div class="lg:col-span-2 rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500 mb-2">Timeline</p>
            <ul class="space-y-2 text-sm">
              <li><span class="font-semibold">12'</span> Goal - Team A</li>
              <li><span class="font-semibold">39'</span> Yellow Card - Team B</li>
              <li><span class="font-semibold">58'</span> Goal - Team B</li>
              <li><span class="font-semibold">70'</span> Goal - Team A</li>
            </ul>
          </div>
          <div class="lg:col-span-2 rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500 mb-2">Lineups</p>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div><p class="font-semibold mb-1">Team A</p><p class="text-gray-600">11 starters, 5 subs</p></div>
              <div><p class="font-semibold mb-1">Team B</p><p class="text-gray-600">11 starters, 5 subs</p></div>
            </div>
          </div>
          <div class="lg:col-span-1 rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500 mb-2">Stats</p>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between"><span>Possession</span><span>54% - 46%</span></div>
              <div class="flex justify-between"><span>Shots</span><span>8 - 6</span></div>
              <div class="flex justify-between"><span>Corners</span><span>4 - 3</span></div>
            </div>
          </div>
        </div>
      </div>

      <div id="player-profile" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-8">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark mb-4">8. Player Profile</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div class="rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500">Goals</p>
            <p id="divisionGoalsValue" class="text-2xl font-bold mt-1">0</p>
          </div>
          <div class="rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500">Cards</p>
            <p id="divisionCardsValue" class="text-2xl font-bold mt-1">0Y / 0R</p>
          </div>
          <div class="rounded-lg border border-gray-100 p-4">
            <p class="text-xs uppercase text-gray-500">Matches played</p>
            <p id="divisionMatchesPlayedValue" class="text-2xl font-bold mt-1">0</p>
          </div>
        </div>
      </div>

      <div id="leaderboard" class="section-card scroll-mt-28 bg-white rounded-xl shadow-sm border border-gray-100 p-5 md:p-6 mb-4">
        <h2 class="text-xl md:text-2xl font-bold text-hope-dark mb-4">9. Leaderboard</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="rounded-lg border border-gray-100 p-4 bg-hope-yellow/10">
            <p class="text-xs uppercase text-gray-500">Top scorer</p>
            <p id="topScorerName" class="text-lg font-bold mt-1">-</p>
            <p id="topScorerValue" class="text-sm text-gray-600">0 Goals</p>
          </div>
          <div class="rounded-lg border border-gray-100 p-4 bg-hope-cyan/10">
            <p class="text-xs uppercase text-gray-500">Top assist</p>
            <p id="topAssistName" class="text-lg font-bold mt-1">-</p>
            <p id="topAssistValue" class="text-sm text-gray-600">0 Assists</p>
          </div>
          <div class="rounded-lg border border-gray-100 p-4 bg-hope-lime/10">
            <p class="text-xs uppercase text-gray-500">Best GK</p>
            <p id="bestGkName" class="text-lg font-bold mt-1">-</p>
            <p id="bestGkValue" class="text-sm text-gray-600">0 Clean Sheets</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const TEAM_KEY = 'edusportpro_teams';
    const COACH_KEY = 'edusportpro_coaches';

    const fallbackTeams = [
      { id: 'T001', name: 'Team A' },
      { id: 'T002', name: 'Team B' },
      { id: 'T003', name: 'Team C' },
      { id: 'T004', name: 'Team D' },
      { id: 'T005', name: 'Team E' },
      { id: 'T006', name: 'Team F' },
      { id: 'T007', name: 'Team G' },
      { id: 'T008', name: 'Team H' },
      { id: 'T009', name: 'Team I' }
    ];

    const fallbackCoaches = [
      { id: 'C001', name: 'Coach Sok' },
      { id: 'C002', name: 'Coach Dara' },
      { id: 'C003', name: 'Coach Vanna' },
      { id: 'C004', name: 'Coach Nita' }
    ];

    function safeParse(input, fallback) {
      try {
        const parsed = JSON.parse(input);
        return Array.isArray(parsed) ? parsed : fallback;
      } catch (_) {
        return fallback;
      }
    }

    function normalizeTeamName(team) {
      return team.name || team.teamName || team.title || team.id || 'Unknown Team';
    }

    function normalizeCoachName(coach) {
      return coach.name || coach.fullName || coach.coachName || coach.id || 'Unknown Coach';
    }

    function getTeams() {
      const teams = window.AdminDataStore.getArray('teams', fallbackTeams);
      return Array.isArray(teams) ? teams : fallbackTeams;
    }

    function getCoaches() {
      const coaches = window.AdminDataStore.getArray('coaches', fallbackCoaches);
      return Array.isArray(coaches) ? coaches : fallbackCoaches;
    }

    function getMatches() {
      const fallback = [];
      const matches = window.AdminDataStore.getArray('matches', fallback);
      return Array.isArray(matches) ? matches : fallback;
    }

    function getPlayers() {
      const fallback = [];
      const players = window.AdminDataStore.getArray('players', fallback);
      return Array.isArray(players) ? players : fallback;
    }

    function getPerformanceRecords() {
      const fallback = [];
      const records = window.AdminDataStore.getArray('performanceRecords', fallback);
      return Array.isArray(records) ? records : fallback;
    }

    function getTeamId(team) {
      return String(team.id || team.teamId || team.team_id || '');
    }

    function getTeamByIdMap(teams) {
      return teams.reduce(function (acc, team) {
        acc[getTeamId(team)] = team;
        return acc;
      }, {});
    }

    function formatDate(value) {
      if (!value) return '-';
      const date = new Date(value);
      if (Number.isNaN(date.getTime())) return String(value);
      return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' });
    }

    function matchTeamName(teamId, map) {
      const team = map[String(teamId)] || null;
      return team ? normalizeTeamName(team) : String(teamId || 'Unknown');
    }

    function matchStatusLabel(match) {
      const status = String(match.status || '').trim();
      if (status) return status;
      if (typeof match.homeScore === 'number' && typeof match.awayScore === 'number') return 'Completed';
      return 'Scheduled';
    }

    function matchStatusClass(status) {
      const text = String(status || '').toLowerCase();
      if (text.includes('live')) return 'bg-hope-cyan/10 text-hope-cyan';
      if (text.includes('upcoming') || text.includes('pending')) return 'bg-hope-yellow/10 text-hope-yellow';
      if (text.includes('complete') || text.includes('finished')) return 'bg-hope-lime/10 text-hope-lime';
      return 'bg-gray-100 text-gray-700';
    }

    function isCompletedMatch(match) {
      const status = String(match.status || '').toLowerCase();
      if (status.includes('complete') || status.includes('finished')) return true;
      return typeof match.homeScore === 'number' && typeof match.awayScore === 'number';
    }

    function buildStandings(teams, matches) {
      const standingsMap = {};

      teams.forEach(function (team) {
        const id = getTeamId(team);
        if (!id) return;
        standingsMap[id] = { teamId: id, p: 0, w: 0, d: 0, l: 0, gf: 0, ga: 0, pts: 0 };
      });

      matches.forEach(function (match) {
        if (!isCompletedMatch(match)) return;
        const homeId = String(match.homeTeamId || '');
        const awayId = String(match.awayTeamId || '');
        const hs = Number(match.homeScore);
        const as = Number(match.awayScore);
        if (!homeId || !awayId || !Number.isFinite(hs) || !Number.isFinite(as)) return;

        if (!standingsMap[homeId]) standingsMap[homeId] = { teamId: homeId, p: 0, w: 0, d: 0, l: 0, gf: 0, ga: 0, pts: 0 };
        if (!standingsMap[awayId]) standingsMap[awayId] = { teamId: awayId, p: 0, w: 0, d: 0, l: 0, gf: 0, ga: 0, pts: 0 };

        const home = standingsMap[homeId];
        const away = standingsMap[awayId];

        home.p += 1; away.p += 1;
        home.gf += hs; home.ga += as;
        away.gf += as; away.ga += hs;

        if (hs > as) {
          home.w += 1; home.pts += 3; away.l += 1;
        } else if (hs < as) {
          away.w += 1; away.pts += 3; home.l += 1;
        } else {
          home.d += 1; away.d += 1; home.pts += 1; away.pts += 1;
        }
      });

      return Object.keys(standingsMap).map(function (id) { return standingsMap[id]; }).sort(function (a, b) {
        const gdA = a.gf - a.ga;
        const gdB = b.gf - b.ga;
        if (b.pts !== a.pts) return b.pts - a.pts;
        if (gdB !== gdA) return gdB - gdA;
        return b.gf - a.gf;
      });
    }

    function renderMatchesSection(matches, teamMap) {
      const tbody = document.getElementById('divisionMatchesBody');
      if (!tbody) return;
      const rows = matches.slice(0, 8).map(function (match) {
        const home = matchTeamName(match.homeTeamId, teamMap);
        const away = matchTeamName(match.awayTeamId, teamMap);
        const homeDivision = (teamMap[String(match.homeTeamId)] || {}).division || '-';
        const status = matchStatusLabel(match);
        return (
          '<tr>' +
          '<td class="px-4 py-3">' + home + ' vs ' + away + '</td>' +
          '<td class="px-4 py-3">' + homeDivision + '</td>' +
          '<td class="px-4 py-3">' + formatDate(match.dateTime || match.date) + '</td>' +
          '<td class="px-4 py-3">' + String(match.venue || '-') + '</td>' +
          '<td class="px-4 py-3"><span class="px-2 py-1 rounded-full text-xs ' + matchStatusClass(status) + '">' + status + '</span></td>' +
          '</tr>'
        );
      });
      tbody.innerHTML = rows.length ? rows.join('') : '<tr><td colspan="5" class="px-4 py-3 text-gray-500">No matches available.</td></tr>';
    }

    function renderStandingsSection(standings, teamMap) {
      const tbody = document.getElementById('divisionStandingsBody');
      if (!tbody) return;
      const rows = standings.slice(0, 12).map(function (row, index) {
        return (
          '<tr>' +
          '<td class="px-4 py-3">' + (index + 1) + '</td>' +
          '<td class="px-4 py-3 font-medium">' + matchTeamName(row.teamId, teamMap) + '</td>' +
          '<td class="px-4 py-3">' + row.p + '</td>' +
          '<td class="px-4 py-3">' + row.w + '</td>' +
          '<td class="px-4 py-3">' + row.d + '</td>' +
          '<td class="px-4 py-3">' + row.l + '</td>' +
          '<td class="px-4 py-3 text-right font-semibold text-hope-lime">' + row.pts + '</td>' +
          '</tr>'
        );
      });
      tbody.innerHTML = rows.length ? rows.join('') : '<tr><td colspan="7" class="px-4 py-3 text-gray-500">No standings data.</td></tr>';
    }

    function renderGroupStandings(standings, teams, teamMap) {
      const bodies = [
        document.getElementById('divisionGroupABody'),
        document.getElementById('divisionGroupBBody'),
        document.getElementById('divisionGroupCBody')
      ];
      const groups = [[], [], []];
      const orderedTeams = teams.slice().sort(function (a, b) {
        return normalizeTeamName(a).localeCompare(normalizeTeamName(b));
      });
      orderedTeams.forEach(function (team, idx) {
        groups[idx % 3].push(team);
      });

      const pointsMap = standings.reduce(function (acc, row) {
        acc[row.teamId] = row.pts;
        return acc;
      }, {});

      bodies.forEach(function (tbody, idx) {
        if (!tbody) return;
        const rows = groups[idx].map(function (team) {
          const id = getTeamId(team);
          const pts = Number(pointsMap[id] || 0);
          return '<tr><td class="px-4 py-2">' + normalizeTeamName(team) + '</td><td class="px-4 py-2 text-right">' + pts + '</td></tr>';
        });
        tbody.innerHTML = rows.length ? rows.join('') : '<tr><td colspan="2" class="px-4 py-2 text-gray-500">No teams</td></tr>';
      });
    }

    function renderMatchList(matches, teamMap) {
      const tbody = document.getElementById('divisionMatchListBody');
      if (!tbody) return;
      const sorted = matches.slice().sort(function (a, b) {
        return new Date(a.dateTime || a.date || 0).getTime() - new Date(b.dateTime || b.date || 0).getTime();
      });
      const rows = sorted.slice(0, 12).map(function (match) {
        const home = matchTeamName(match.homeTeamId, teamMap);
        const away = matchTeamName(match.awayTeamId, teamMap);
        const status = matchStatusLabel(match);
        return (
          '<tr>' +
          '<td class="px-4 py-3">' + home + ' vs ' + away + '</td>' +
          '<td class="px-4 py-3">' + formatDate(match.dateTime || match.date) + '</td>' +
          '<td class="px-4 py-3">' + String(match.venue || '-') + '</td>' +
          '<td class="px-4 py-3 ' + (status.toLowerCase().includes('live') ? 'text-hope-cyan' : (status.toLowerCase().includes('upcoming') ? 'text-hope-yellow' : 'text-gray-600')) + '">' + status + '</td>' +
          '</tr>'
        );
      });
      tbody.innerHTML = rows.length ? rows.join('') : '<tr><td colspan="4" class="px-4 py-3 text-gray-500">No match list available.</td></tr>';
    }

    function renderPlayerProfileAndLeaderboard(players, records) {
      const goals = records.reduce(function (sum, row) { return sum + Number(row.goals || 0); }, 0);
      const yellow = records.reduce(function (sum, row) { return sum + Number(row.yellow || 0); }, 0);
      const red = records.reduce(function (sum, row) { return sum + Number(row.red || 0); }, 0);
      const matchesPlayed = records.filter(function (row) { return String(row.sessionType || '').toLowerCase() === 'match'; }).length;

      const byPlayer = {};
      records.forEach(function (row) {
        const id = String(row.playerId || '');
        if (!id) return;
        if (!byPlayer[id]) byPlayer[id] = { goals: 0, assists: 0 };
        byPlayer[id].goals += Number(row.goals || 0);
        byPlayer[id].assists += Number(row.assists || 0);
      });

      const playerMap = players.reduce(function (acc, player) {
        acc[String(player.id || '')] = player;
        return acc;
      }, {});

      let topGoal = { id: '', value: 0 };
      let topAssist = { id: '', value: 0 };
      Object.keys(byPlayer).forEach(function (id) {
        if (byPlayer[id].goals > topGoal.value) topGoal = { id: id, value: byPlayer[id].goals };
        if (byPlayer[id].assists > topAssist.value) topAssist = { id: id, value: byPlayer[id].assists };
      });

      let bestGk = { name: '-', value: 0 };
      players.forEach(function (player) {
        const pos = String(player.position || '').toLowerCase();
        if (!pos.includes('goal')) return;
        const value = Number(player.cleanSheets || 0);
        if (value > bestGk.value) {
          bestGk = { name: String(player.name || player.id || '-'), value: value };
        }
      });

      const goalName = (playerMap[topGoal.id] && (playerMap[topGoal.id].name || playerMap[topGoal.id].id)) || '-';
      const assistName = (playerMap[topAssist.id] && (playerMap[topAssist.id].name || playerMap[topAssist.id].id)) || '-';

      const goalsEl = document.getElementById('divisionGoalsValue');
      const cardsEl = document.getElementById('divisionCardsValue');
      const matchesEl = document.getElementById('divisionMatchesPlayedValue');
      if (goalsEl) goalsEl.textContent = String(goals);
      if (cardsEl) cardsEl.textContent = String(yellow) + 'Y / ' + String(red) + 'R';
      if (matchesEl) matchesEl.textContent = String(matchesPlayed);

      const topScorerName = document.getElementById('topScorerName');
      const topScorerValue = document.getElementById('topScorerValue');
      const topAssistName = document.getElementById('topAssistName');
      const topAssistValue = document.getElementById('topAssistValue');
      const bestGkName = document.getElementById('bestGkName');
      const bestGkValue = document.getElementById('bestGkValue');

      if (topScorerName) topScorerName.textContent = goalName;
      if (topScorerValue) topScorerValue.textContent = String(topGoal.value) + ' Goals';
      if (topAssistName) topAssistName.textContent = assistName;
      if (topAssistValue) topAssistValue.textContent = String(topAssist.value) + ' Assists';
      if (bestGkName) bestGkName.textContent = bestGk.name;
      if (bestGkValue) bestGkValue.textContent = String(bestGk.value) + ' Clean Sheets';
    }

    function renderDivisionFromJson() {
      const teams = getTeams();
      const matches = getMatches();
      const players = getPlayers();
      const performanceRecords = getPerformanceRecords();
      const teamMap = getTeamByIdMap(teams);
      const standings = buildStandings(teams, matches);

      renderMatchesSection(matches, teamMap);
      renderStandingsSection(standings, teamMap);
      renderGroupStandings(standings, teams, teamMap);
      renderMatchList(matches, teamMap);
      renderPlayerProfileAndLeaderboard(players, performanceRecords);
    }

    function shuffle(list) {
      const arr = list.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        const tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
      }
      return arr;
    }

    function splitGroups(shuffledTeams) {
      const groups = { A: [], B: [], C: [] };
      const keys = ['A', 'B', 'C'];
      shuffledTeams.forEach(function (team, idx) {
        const key = keys[idx % keys.length];
        groups[key].push(team);
      });
      return groups;
    }

    function renderGroupList(listId, teams) {
      const el = document.getElementById(listId);
      if (!el) return;
      if (!teams.length) {
        el.innerHTML = '<li class="text-gray-500">No team</li>';
        return;
      }
      el.innerHTML = teams.map(function (team) {
        return '<li>' + normalizeTeamName(team) + '</li>';
      }).join('');
    }

    function renderGroupStageSpot(groups) {
      const tbody = document.getElementById('groupStageSpotBody');
      if (!tbody) return;

      const rows = [];
      const groupOrder = ['A', 'B', 'C'];
      let spotNo = 1;
      groupOrder.forEach(function (groupName) {
        groups[groupName].forEach(function (team) {
          const spot = String(spotNo).padStart(2, '0');
          rows.push(
            '<tr>' +
            '<td class="px-3 py-2 font-semibold text-hope-cyan">GS-' + spot + '</td>' +
            '<td class="px-3 py-2">' + normalizeTeamName(team) + '</td>' +
            '<td class="px-3 py-2">' + groupName + '</td>' +
            '</tr>'
          );
          spotNo += 1;
        });
      });

      tbody.innerHTML = rows.length ? rows.join('') : '<tr><td colspan="3" class="px-3 py-2 text-gray-500">No team slots available.</td></tr>';
    }

    function renderCoachTeamDraw(coaches, groupEntries) {
      const tbody = document.getElementById('coachTeamDrawBody');
      if (!tbody) return;
      if (!coaches.length || !groupEntries.length) {
        tbody.innerHTML = '<tr><td colspan="3" class="px-3 py-2 text-gray-500">No coach/team data available for draw.</td></tr>';
        return;
      }

      const shuffledEntries = shuffle(groupEntries);
      const rows = coaches.map(function (coach, idx) {
        const entry = shuffledEntries[idx % shuffledEntries.length];
        return (
          '<tr>' +
          '<td class="px-3 py-2">' + normalizeCoachName(coach) + '</td>' +
          '<td class="px-3 py-2">' + normalizeTeamName(entry.team) + '</td>' +
          '<td class="px-3 py-2">' + entry.group + '</td>' +
          '</tr>'
        );
      });
      tbody.innerHTML = rows.join('');
    }

    function runDivisionRandomDraw() {
      const teams = getTeams().map(function (t, idx) {
        return Object.assign({ id: 'T' + String(idx + 1).padStart(3, '0') }, t);
      });
      const coaches = getCoaches();
      const groups = splitGroups(shuffle(teams));

      renderGroupList('groupAList', groups.A);
      renderGroupList('groupBList', groups.B);
      renderGroupList('groupCList', groups.C);
      renderGroupStageSpot(groups);

      const entries = []
        .concat(groups.A.map(function (team) { return { team: team, group: 'A' }; }))
        .concat(groups.B.map(function (team) { return { team: team, group: 'B' }; }))
        .concat(groups.C.map(function (team) { return { team: team, group: 'C' }; }));
      renderCoachTeamDraw(coaches, entries);
    }

    function jumpToSelectedSection() {
      const select = document.getElementById('quickNavSelect');
      if (!select || !select.value) return;
      window.location.hash = select.value;
    }

    document.addEventListener('DOMContentLoaded', async function () {
      await window.AdminDataStore.bootstrap();
      const btn = document.getElementById('runDivisionDrawBtn');
      if (btn) btn.addEventListener('click', runDivisionRandomDraw);
      const quickNavBtn = document.getElementById('quickNavGoBtn');
      const quickNavSelect = document.getElementById('quickNavSelect');
      if (quickNavBtn) quickNavBtn.addEventListener('click', jumpToSelectedSection);
      if (quickNavSelect) {
        quickNavSelect.addEventListener('change', jumpToSelectedSection);
      }
      runDivisionRandomDraw();
      renderDivisionFromJson();
    });

    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const backdrop = document.getElementById('sidebarBackdrop');
      const body = document.body;
      if (sidebar.classList.contains('-translate-x-full')) {
        sidebar.classList.remove('-translate-x-full');
        backdrop.classList.remove('hidden');
        setTimeout(() => backdrop.classList.remove('opacity-0'), 10);
        body.style.overflow = 'hidden';
      } else {
        sidebar.classList.add('-translate-x-full');
        backdrop.classList.add('opacity-0');
        setTimeout(() => backdrop.classList.add('hidden'), 300);
        body.style.overflow = 'auto';
      }
    }
  </script>
  <script src="/admin/admin-sidebar-loader.js"></script>
</body>

</html>
